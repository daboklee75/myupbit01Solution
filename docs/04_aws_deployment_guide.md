# AWS 클라우드 배포 가이드 (초보자용)

이 가이드는 `myupbit01` 프로그램을 AWS(Amazon Web Services)의 가상 서버(EC2)에 배포하여 24시간 중단 없이 실행하는 방법을 설명합니다.

## 1. 개요
우리는 AWS에서 **EC2 (Elastic Compute Cloud)**라는 서비스를 사용합니다. 이는 클라우드 상에 있는 여러분만의 "가상 컴퓨터"입니다. 이 컴퓨터를 켜서 우리 프로그램을 설치하고 실행해두면, 내 PC를 꺼도 프로그램은 계속 돌아갑니다.

## 2. 준비 사항
*   **AWS 계정**: [aws.amazon.com](https://aws.amazon.com/ko/)에서 회원가입을 완료해주세요. (신규 가입 시 1년간 '프리 티어'로 일정 사용량을 무료로 쓸 수 있습니다)

---

## 3. 단계별 진행 절차

### 1단계: 서버(EC2 인스턴스) 생성하기

1.  AWS 콘솔에 로그인 후, 상단 검색창에 **EC2**를 입력하고 선택합니다.
2.  **'인스턴스 시작'** (Launch Instances) 버튼을 주황색 버튼을 클릭합니다.
3.  **이름 및 태그**: `MyUpbitBot` 등 원하는 이름을 입력합니다.
4.  **애플리케이션 및 OS 이미지**: **Ubuntu**를 선택합니다. (버전은 Ubuntu 22.04 LTS 또는 24.04 LTS 등 기본값 유지)
5.  **인스턴스 유형**: **t2.micro** 또는 **t3.micro** (프리 티어 사용 가능 태그가 있는 것)를 선택합니다.
6.  **키 페어(로그인)**:
    *   '새 키 페어 생성'을 클릭합니다.
    *   이름: `myupbit-key` (원하는 이름)
    *   유형: RSA
    *   파일 형식: `.pem`
    *   **'키 페어 생성'**을 누르면 파일이 다운로드됩니다. **이 파일은 잃어버리면 안 되니 잘 보관하세요.** (나중에 고급 접속 방식에 필요합니다)
7.  **네트워크 설정**:
    *   '편집'을 누르거나 기본 상태에서 확인합니다.
    *   **'보안 그룹 생성'**을 선택합니다.
    *   **SSH 허용**은 기본으로 체크되어 있을 겁니다 (포트 22).
    *   **추가 보안 그룹 규칙**을 1개 더 만듭니다 (대시보드 접속용).
        *   유형: **사용자 지정 TCP**
        *   포트 범위: **8501**
        *   소스: **위치 무관 (0.0.0.0/0)**
8.  **스토리지 구성**: 기본값(8GB 또는 10GB)이면 충분합니다.
9.  우측의 **'인스턴스 시작'** 버튼을 클릭합니다.

### 2단계: 서버 접속하기

가장 쉬운 'EC2 인스턴스 연결' 기능을 사용하겠습니다.

1.  EC2 대시보드의 '인스턴스' 목록에서 방금 만든 `MyUpbitBot`을 클릭합니다.
2.  상단의 **'연결' (Connect)** 버튼을 누릅니다.
3.  **'EC2 인스턴스 연결'** 탭에서 **'연결'** 버튼을 누릅니다.
4.  새 브라우저 창이 뜨면서 검은색 터미널 화면이 나오면 성공입니다.

### 3단계: 환경 설정 및 코드 다운로드

이제 가상 컴퓨터(서버) 접속한 상태입니다. 아래 명령어들을 한 줄씩 복사해서 붙여넣고 엔터(Enter)를 치세요. (붙여넣기는 마우스 우클릭 -> Paste)

**1. 시스템 업데이트 및 필수 프로그램 설치**
```bash
sudo apt update
sudo apt install python3-pip git -y
```

**2. 소스 코드 다운로드**
```bash
git clone https://github.com/daboklee75/myupbit01Solution.git
cd myupbit01Solution
```

**3. 파이썬 라이브러리 설치**
```bash
pip3 install -r requirements.txt
```

### 4단계: 설정 파일 생성

업비트 API 키 등 비밀 정보를 서버에 입력해야 합니다.

**1. .env 파일 생성**
```bash
nano .env
```
위 명령어를 치면 편집기 화면이 열립니다. 아래 내용을 붙여넣고, **자신의 실제 Access Key와 Secret Key로 바꿔주세요.**

```ini
UPBIT_ACCESS_KEY=여기에_엑세스_키_입력
UPBIT_SECRET_KEY=여기에_시크릿_키_입력
```
*   **저장하고 나가기**: `Ctrl + X` 누르고, `Y` 누르고, `Enter` 누르기.

**2. 로그 폴더 생성**
```bash
mkdir -p logs
```

### 5단계: 프로그램 실행 (백그라운드)

터미널 창을 닫아도 프로그램이 계속 실행되게 하려면 `nohup` 명령어를 씁니다.

**1. 트레이딩 봇 실행**
```bash
nohup python3 src/myupbit01/trader.py > logs/trader.log 2>&1 &
```

**2. 대시보드(웹 아님) 실행**
```bash
nohup streamlit run src/myupbit01/app.py > logs/app.log 2>&1 &
```

### 6단계: 실행 확인 및 접속

1.  **로그 확인**: 프로그램이 잘 도는지 실시간으로 보고 싶다면:
    ```bash
    tail -f logs/trader.log
    ```
    (빠져나오려면 `Ctrl + C`)

2.  **대시보드 접속**:
    *   AWS 콘솔 인스턴스 목록에서 내 서버의 **'퍼블릭 IPv4 주소'**를 복사합니다.
    *   브라우저 주소창에 `http://[퍼블릭IP]:8501` 입력.
    *   예: `http://54.123.45.67:8501`
    *   대시보드가 뜨면 성공입니다!

### 참고: 프로그램 종료 방법
혹시 프로그램을 끄고 싶다면 다음 명령어로 프로세스를 찾아 종료합니다.
```bash
pkill -f trader.py
pkill -f streamlit
```
